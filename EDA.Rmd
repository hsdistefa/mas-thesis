---
title: "Thesis EDA"
author: "Harrison DiStefano"
output:
  pdf_document: default
  html_notebook: default
---

```{r setup}
#knitr::opts_chunk$set(warning = FALSE, message = FALSE)
knitr::opts_knit$set(root.dir = "C:/Users/harrison/Dropbox/Schoolwork/Thesis/Project/")
```


```{r}
library(dplyr)
library(ggplot2)
library(tidyr)
library(tseries)
```



```{r load data}
housing <- read.csv('data/processed.csv')
head(housing)
```


```{r data cleaning}
housing$DATE <- as.Date(housing$DATE, format = "%Y-%m-%d")
head(housing)
```


```{r chart1}
housing %>%
  pivot_longer(c(MSPUS, MSACSR),
               names_to = "var", values_to = "value") %>%
  ggplot(aes(x = DATE, y = value, group = 1)) +
  geom_line() +
  facet_grid(vars(var), scales = "free_y") +
  scale_x_date(date_breaks = "5 year", date_labels = "%Y") +
  labs(title = "US Housing Supply Change and Median Home Prices",
       y = "")
```

```{r transform prices}
# Make housing prices stationary
housing$pctChangeMSPUS <- c(0, diff(log(housing$MSPUS)))  # diff log calculates symmetric % change
                                                          # Add 0 add beginning to match row length

housing %>%
  ggplot(aes(x = DATE, y = pctChangeMSPUS)) +
  geom_line()
```

```{r stationarity test}
# Ljung-Box test for independence - stationarity
Box.test(housing$pctChangeMSPUS, lag=25, type="Ljung-Box")

# Augmented Dickey-Fuller (ADF) t-statistic test for unit root
adf.test(housing$pctChangeMSPUS)

# Kwiatkowski-Phillips-Schmidt-Shin (KPSS) for level or trend stationarity
kpss.test(housing$pctChangeMSPUS, null="Trend")
```

